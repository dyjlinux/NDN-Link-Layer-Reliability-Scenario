
%linear topology var hops

losses_6node_maxRet3 = [0  1  0  1  0  0  0  1  0  1  1  0  0  1  0  0  0  0  0  0;
						0  1  1  0  0  0  0  0  0  0  1  1  0  1  1  1  0  3  0  0;
						1  0  2  1  1  0  1  0  1  0  1  1  0  0  0  1  2  1  0  0;
						1  1  2  1  2  0  1  0  2  0  0  1  1  2  1  2  0  1  1  1;
						0  0  2  1  1  0  1  2  1  0  4  4  2  0  0  1  1  0  1  0;
						2  3  2  3  1  3  1  2  1  5  2  0  2  0  1  3  3  1  4  1;
						2  2  3  1  3  4  0  2  2  1  3  5  1  0  0  0  3  2  1  2;
						];

losses_6node_maxRet2 = [3  3  5  3  5  3  7  3  3  5  4  5  5  7  4  7  4  4  2  6;
						7  12  11  4  14  9  11  10  8  9  8  12  12  3  7  9  12  10  10  10;
						19  10  17  14  14  12  12  21  17  12  12  18  14  10  11  15  21  18  10  15;
						19  24  19  27  23  14  14  22  16  21  11  22  22  17  15  27  24  21  24  23;
						24  21  26  19  21  29  33  22  34  22  26  28  33  24  23  35  31  25  27  32;
						30  35  27  27  15  21  29  22  29  26  36  35  20  34  29  24  30  36  36  40;
						41  29  31  21  33  33  32  39  49  42  39  34  30  36  33  38  27  32  45  31;
						];

losses_6node_maxRet1 = [93  92  105  90  100  88  100  98  109  107  104  88  116  110  97  128  91  85  105  100;
						219  193  204  214  201  195  189  206  193  192  189  178  185  192  206  189  192  181  193  206;
						298  263  314  318  296  314  276  290  325  317  327  307  299  311  298  324  312  299  317  307;
						414  395  390  396  399  400  409  399  416  419  413  428  364  418  400  378  409  416  418  418;
						537  547  504  505  469  496  500  510  465  517  521  544  481  520  515  523  503  499  520  488;
						623  632  596  625  641  624  625  603  568  579  651  615  566  618  604  615  614  630  617  583;
						691  721  665  753  695  701  723  689  705  728  730  734  668  741  702  706  713  768  758  711;
						];


totallosses_6node_maxRet3 = [2070  1992  2015  2023  2041  2068  1985  1935  2050  1991  1951  2035  2010  2036  1960  2111  1959  1986  2004  2048;
							 4065  3998  3964  4013  4070  4045  4009  3936  4114  3906  3974  4068  3998  3946  3899  4111  4034  3988  3987  4020;
							 6065  5984  5991  5958  6035  6026  5969  5873  6028  5994  6069  6040  5818  5958  6090  6120  6102  6057  6022  6067;
							 8080  8009  7978  7960  7923  7999  7915  7926  8043  7952  8065  8073  7836  8058  8020  8086  8018  8092  8125  7962;
							 10141  10027  9899  10028  9929  9993  9933  9883  9927  9876  9903  10154  9856  10052  9984  10095  10081  10071  10018  9982;
							 11966  12170  11866  12020  11900  12026  11995  11948  11996  11932  12016  12022  11895  12069  11912  12072  11904  12136  12115  11989;
							 13983  14004  13894  14199  13858  13982  14054  14042  13998  14082  14019  14116  13713  14001  13912  14040  13774  14100  14102  14059;
							];

totallosses_6node_maxRet2 = [2038  1972  2022  2025  2075  2101  1988  1935  2014  1998  1986  2070  2025  2034  1976  2097  1945  2016  1993  2042;
							 4038  3945  3915  3976  4106  4081  4024  3951  4066  3868  3989  4044  4000  3935  3914  4132  4075  4003  3998  4059;
							 6106  6015  6001  5904  6035  6003  5968  5879  5996  6012  6077  6061  5889  5959  6081  6117  6018  5973  5977  6056;
							 8082  7991  7963  7885  7921  7951  7957  7989  7999  7954  8093  8060  7836  8062  8042  8078  8078  8030  8037  7993;
							 10137  10099  9820  9997  9970  10038  9942  9855  9908  9866  9863  10089  9766  10116  9968  10069  10052  10128  10063  9916;
							 11932  12194  11840  12100  11839  11955  11865  11970  11919  12001  11918  12014  11699  11996  11835  12003  11933  12095  12045  12004;
							 13902  13973  13785  14172  13774  13998  13922  13964  13935  14044  13900  14006  13670  14003  13793  13955  13810  14088  14022  14059;
							 ];

totallosses_6node_maxRet1 = [2033  1990  2032  2005  2071  2098  1976  1944  2033  1992  1976  2038  2047  2057  1948  2102  1960  2015  2018  2064;
							 4038  4003  3990  3995  4077  4053  4026  3974  4114  3931  3989  4067  4015  3918  3897  4153  4053  4026  4026  4067;
							 6140  6041  6026  5988  6064  6049  5992  5931  6008  6016  6034  6113  5879  5985  6129  6146  6110  6077  6026  6061;
							 8166  8076  8042  7943  7967  8031  8007  8058  8023  8042  8085  8076  7955  8077  8077  8133  8155  8176  8121  8025;
							 10177  10173  10035  10113  10102  10120  10080  10039  10074  10054  10075  10212  9883  10247  10017  10198  10134  10209  10097  10200;
							 12131  12226  12058  12151  11996  12215  12076  12212  12159  12189  12208  12233  12007  12229  12092  12208  12107  12259  12263  12232;
							 14233  14370  14160  14465  14105  14303  14267  14315  14208  14352  14223  14289  13958  14215  14125  14266  14098  14329  14334  14344;
							];

hops = [1; 2; 3; 4; 5; 6; 7];


percentage_maxRet3 = (totallosses_6node_maxRet3 - losses_6node_maxRet3)*100./totallosses_6node_maxRet3;
percentage_maxRet2 = (totallosses_6node_maxRet2 - losses_6node_maxRet2)*100./totallosses_6node_maxRet2;
percentage_maxRet1 = (totallosses_6node_maxRet1 - losses_6node_maxRet1)*100./totallosses_6node_maxRet1;

h = plot(hops, mean(percentage_maxRet3, 2), 'm.',
 	     hops, mean(percentage_maxRet2, 2), 'b.',
  	     hops, mean(percentage_maxRet1, 2), 'g.'
  	    );

h = errorbar(hops, mean(percentage_maxRet3, 2), ci(percentage_maxRet3)(:,1), ci(percentage_maxRet3)(:,2), 'm.',
			 hops, mean(percentage_maxRet2, 2), ci(percentage_maxRet2)(:,1), ci(percentage_maxRet2)(:,2), 'b.',
			 hops, mean(percentage_maxRet1, 2), ci(percentage_maxRet1)(:,1), ci(percentage_maxRet1)(:,2), 'g.'
			);

axis([1 7 94 100]);
set(h, 'markersize', 20);

ax = gca();
set(ax, 'fontsize', 20);
%grid on;
set(ax, 'YGrid', 'on', 'XGrid', 'off');

h=legend('Max Retransmissions = 3', 'Max Retransmissions = 2', 'Max Retransmissions = 1');
set(h, 'Location', 'west');

title('Percentage of lost interest-data exchanges recovered');
xlabel("Hop length of linear topologies");
ylabel('Percentage of lost interest-data exchanges recovered');
%grid on;
%grid minor;