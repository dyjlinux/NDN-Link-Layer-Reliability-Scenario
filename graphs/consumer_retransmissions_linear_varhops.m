
%linear topology of var hops
figure;
pause;
rt_6node_maxRet3 = [308  313  296  308  266  315  310  294  280  310  341  328  272  317  288  297  321  279  268  361;
					196  178  198  157  186  211  168  174  183  194  168  185  168  169  189  187  173  184  176  157;
					90  90  75  89  58  70  99  122  86  70  54  93  95  89  76  68  85  87  92  78;
					41  29  31  23  38  27  42  32  42  33  38  42  49  38  31  30  55  46  28  39;
					12  23  22  33  19  24  22  26  38  24  19  37  32  19  25  25  20  17  25  16;
					12  19  21  16  10  11  14  29  17  26  11  11  14  15  12  11  22  16  19  22;
					12  12  25  6  8  12  19  11  17  3  13  16  19  2  2  8  16  14  8  19;
					];

rt_6node_maxRet2 = [288  298  300  325  297  327  331  282  254  278  333  289  270  319  339  281  337  261  278  311;
					164  208  189  196  174  210  176  189  175  184  165  182  179  218  199  191  182  147  187  176;
					84  78  95  90  78  77  94  102  117  91  89  91  99  96  78  95  76  90  79  94;
					44  59  59  56  59  56  50  67  53  52  48  60  52  56  58  53  66  51  56  53;
					36  44  51  42  38  42  60  54  61  42  49  48  48  47  67  56  67  38  48  64;
					49  62  40  36  20  30  47  31  43  37  50  41  29  45  39  31  49  51  51  54;
					48  38  41  32  44  39  43  46  57  59  47  42  43  48  38  54  41  36  57  36;
					];

rt_6node_maxRet1 = [342  365  382  349  365  350  382  376  353  380  379  382  402  314  373  368  372  324  361  377;
					385  382  366  391  330  366  360  361  346  315  360  321  328  383  368  334  318  334  338  359;
					363  367  389  395  370  378  345  380  389  387  383  384  387  377  364  380  393  372  387  396;
					448  429  430  421  435  429  439  425  454  455  451  458  392  445  428  407  439  452  452  443;
					562  563  530  528  489  528  526  531  482  546  531  564  504  531  545  542  527  509  541  500;
					627  639  610  629  651  632  635  606  580  589  669  624  569  626  617  626  623  641  636  591;
					709  727  669  764  703  705  726  699  722  737  735  744  677  750  706  718  724  777  763  717;
					];

rt_6node_noRe = [2184  2101  2156  2135  2230  2211  2119  2052  2183  2107  2101  2195  2147  2177  2089  2259  2067  2124  2137  2173;
				4483  4348  4387  4376  4556  4462  4483  4330  4493  4308  4393  4453  4395  4322  4300  4533  4469  4427  4409  4463;
				6943  6852  6912  6771  6885  6913  6799  6720  6939  6863  6883  6955  6737  6836  6944  7021  6894  6894  6852  6888;
				9547  9482  9440  9302  9324  9417  9439  9359  9455  9357  9551  9536  9204  9497  9459  9524  9497  9609  9581  9409;
				12287  12369  12111  12225  12116  12354  12084  12166  18265  12168  12242  12293  11907  12438  12093  12333  12277  12428  12205  12238;
				15423  15577  15168  15168  15134  15390  15278  15168  15377  15423  31535  15168  23584  15410  26934  15452  15168  15577  24187  18326; 
				28880  28327  32942  40486  32360  26111  32296  40276  34069  30422  28880  31464  39734  44327  31464  18818  39734  28880  44327  18920;
				];

hops = 1:7;

h = plot	(hops, mean(rt_6node_maxRet3,2), 'm.',
			 hops, mean(rt_6node_maxRet2,2), 'b.',
			 hops, mean(rt_6node_maxRet1,2), 'g.',
			 hops, mean(rt_6node_noRe,2), 'r.'
			);

h = errorbar(hops, mean(rt_6node_maxRet3,2), ci(rt_6node_maxRet3)(:,1), ci(rt_6node_maxRet3)(:,2), 'm.',
			 hops, mean(rt_6node_maxRet2,2), ci(rt_6node_maxRet2)(:,1), ci(rt_6node_maxRet2)(:,2), 'b.',
			 hops, mean(rt_6node_maxRet1,2), ci(rt_6node_maxRet1)(:,1), ci(rt_6node_maxRet1)(:,2), 'g.',
			 hops, mean(rt_6node_noRe,2), ci(rt_6node_noRe)(:,1), ci(rt_6node_noRe)(:,2), 'r.'
			);

set(h,'markersize',20);
axis([1 7 0 45000]);

ax = gca();
set(ax, 'fontsize', 22);
set(ax,'YGrid','on');

b=legend('Max Retransmissions = 3', 'Max Retransmissions = 2', 'Max Retransmissions = 1', 'Only end-to-end reliability');
set(b, 'Location', 'northeast');

title('Consumer Retransmissions');
xlabel('Hop length of linear topologies');
ylabel('Consumer Retransmissions');

p = get(gca, 'Position');
ax2 = axes('Position',[p(1)+0.05 p(2)+0.4 p(3)-0.42 p(4)-0.42]);

h2 = plot(ax2, hops, mean(rt_6node_maxRet3,2), 'm.',
		 hops, mean(rt_6node_maxRet2,2), 'b.',
		 hops, mean(rt_6node_maxRet1,2), 'g.');
set(h2,'markersize',15);
xlim(ax2,[1 7]);
%figure()
%set(h2, 'Xlim', [-0.2 0], 'Ylim', [-5 -4]);
%grid on;


%[p(1)+.06 p(2)+.06 p(3)+.5 p(4)+.5]