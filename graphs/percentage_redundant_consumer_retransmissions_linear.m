

%linear topology of hop length 5

rt_6node_maxRet3 = [234  221  195  194  205  210  216  187  232  233  210  195  217  229  210  233  227  233  211  230;
259  268  263  265  239  254  230  306  246  250  258  264  283  281  244  248  235  250  260  232;
150  153  166  203  176  157  165  136  144  171  141  131  151  129  141  131  159  169  131  153;
80  76  75  81  80  73  85  79  81  96  71  62  66  68  82  76  52  75  76  90;
30  29  34  51  41  39  39  30  35  43  35  30  24  42  47  57  45  46  30  28;
27  17  19  18  17  16  22  17  8  11  13  28  18  17  17  27  26  15  29  19;
];


rt_6node_maxRet2 = [234  221  195  194  205  210  216  187  232  233  210  195  217  229  210  233  227  233  211  230;
259  268  263  265  239  254  230  306  246  250  258  264  283  281  244  248  235  250  224  232;
150  155  150  151  181  144  165  163  167  171  136  177  176  141  135  145  175  182  131  160;
89  74  72  76  83  96  78  76  83  63  65  84  57  76  72  73  83  62  87  90;
62  43  43  45  71  66  50  41  45  51  57  47  52  52  53  60  48  39  60  38;
50  51  40  41  40  37  55  47  50  47  48  40  39  50  50  48  51  42  57  38;
];


rt_6node_maxRet1 = [217  221  210  231  237  204  195  241  223  215  212  201  230  238  213  231  231  261  236  232;
253  274  233  257  270  278  248  260  259  295  266  277  245  295  228  262  271  258  254  295;
242  201  215  214  211  230  200  235  213  237  219  218  212  214  215  204  239  237  241  202;
272  249  258  249  226  250  246  260  239  259  266  242  233  242  244  276  233  225  241  242;
377  353  339  355  344  381  351  345  374  366  382  360  329  352  375  356  347  347  357  357;
517  541  486  499  499  509  515  518  546  489  528  500  512  539  537  554  509  521  522  512;
];

rt_6node_noRe = [1037  1082  1082  975  1008  1071  1048  1047  946  1048  1056  1032  1000  1024  1011  983  1029  1063  1036  992;
2095  2142  2152  1984  2041  2119  2063  2129  2004  2186  2145  2071  2079  2070  2113  2083  2048  2153  2073  2046;
4317  4354  4333  4310  4285  4430  4268  4384  4328  4472  4355  4305  4324  4235  4336  4412  4245  4418  4290  4379;
6850  6852  6661  6760  6663  6879  6684  6812  6768  6874  6744  6737  6801  6580  6716  6840  6714  6785  6707  6758;
9550  9471  9355  9357  9276  9526  9351  9443  9400  9499  9417  9483  9473  9186  9412  9495  9312  9371  9284  9475;
12360  14264  12192  12264  12360  12264  12173  12288  12301  12244  12283  12360  12240  11967  12150  12240  13240  12337  12173  10150;
];

losses_6node_maxRet3 = [0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0;
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0;
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1;
0  0  0  0  0  0  0  0  1  0  1  0  0  0  0  0  0  1  1  0;
2  0  0  2  0  0  1  0  1  0  0  1  0  0  2  1  3  0  0  2;
4  0  1  4  1  1  4  4  1  2  0  1  1  0  0  0  2  0  0  1;
];

losses_6node_maxRet2 = [0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0;
0  0  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0;
0  1  1  6  1  5  0  2  2  0  2  3  1  2  1  4  3  1  0  2;
3  3  5  9  7  5  9  6  8  8  1  7  2  4  10  9  7  4  7  2;
11  13  14  11  15  21  11  14  15  20  14  19  20  15  8  9  12  14  16  14;
34  27  24  18  22  23  30  27  31  21  24  23  23  35  26  28  21  18  32  26;
];

losses_6node_maxRet1 = [4  6  6  6  6  2  5  6  4  5  6  2  1  4  3  7  2  7  4  3;
20  21  19  21  14  22  21  19  23  27  24  20  21  28  13  21  24  29  16  19;
80  81  76  88  59  79  68  87  73  90  69  93  81  92  79  75  72  102  73  71;
185  197  183  178  169  192  181  174  164  201  207  186  160  179  179  186  156  166  176  175;
341  331  295  318  317  341  324  315  331  327  348  338  304  318  333  332  306  302  322  334;
499  524  476  486  483  498  506  493  528  480  501  477  498  520  515  540  497  502  499  498;
];


percentage_maxRet3 = (rt_6node_maxRet3-losses_6node_maxRet3)*100./rt_6node_maxRet3;
percentage_maxRet2 = (rt_6node_maxRet2-losses_6node_maxRet2)*100./rt_6node_maxRet2;
percentage_maxRet1 = (rt_6node_maxRet1-losses_6node_maxRet1)*100./rt_6node_maxRet1;
% percentage_withoutRel = (rt_6node_withoutRel-losses_6node_withoutRel)*100./rt_6node_withoutRel;

                    

probabilities = [0.005; 0.01; 0.02; 0.03; 0.04; 0.05;];

h = plot	(probabilities, mean(percentage_maxRet3,2), 'm.',
			 probabilities, mean(percentage_maxRet2,2), 'b.',
			 probabilities, mean(percentage_maxRet1,2), 'g.'
			);

h = errorbar(probabilities, mean(percentage_maxRet3,2), ci(percentage_maxRet3)(:,1), ci(percentage_maxRet3)(:,2), 'm.',
			 probabilities, mean(percentage_maxRet2,2), ci(percentage_maxRet2)(:,1), ci(percentage_maxRet2)(:,2), 'b.',
			 probabilities, mean(percentage_maxRet1,2), ci(percentage_maxRet1)(:,1), ci(percentage_maxRet1)(:,2), 'g.'
			);

set(h,'markersize',20);
axis([0 0.05 0 100]);

ax = gca();
set(ax, 'fontsize', 22);
set(ax,'YGrid','on');

b=legend('Max Retransmissions = 3', 'Max Retransmissions = 2', 'Max Retransmissions = 1');
set(b, 'Location', 'southwest');

title('Percentage of redundant consumer retransmissions');
xlabel("Error probability of links");
ylabel("Percentage of redundant consumer retransmissions");
%grid on;
