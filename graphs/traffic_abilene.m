
%abilene topology


traffic_maxRet3 = [262139603  262103909  262075461  262131954  262066758  262244368  262062644  262134017  262190823  262146948  262109158  262059597  262067707  262026974  262109639  262118980  262103372  262102585  262042327  262037596;
					263961944  263809567  263872973  263887698  263848937  264024495  263913988  264012159  263901835  263939189  263949370  263957101  263836966  263894149  263906881  263909479  263961555  263923550  263819367  263945078;
					266398230  266476026  266404619  266437763  266516466  266606424  266324905  266413340  266379828  266472575  266438606  266694662  266262176  266413864  266341021  266390180  266422652  266561175  266478623  266539949;
					268503210  268592514  268871539  268509502  268592943  268750167  268669981  268684551  268656135  268615124  268686894  268716413  268414862  268605160  268534520  268546782  268522845  268675415  268636383  268613055;
					270966634  270857439  270989039  270880623  271048975  271021344  271046935  271064042  271045923  271085214  271045923  271106473  270844597  270872853  270840437  271056403  271071415  271183874  270986132  271029912;
					273734849  273609300  273566942  273672762  273701066  273779290  273430146  273653952  273601345  273718614  273542379  273703912  273489021  273645237  273511896  273775403  273608739  273883482  273751253  273728271;
					]/1000000;

traffic_maxRet2 = [262139603  262103909  262075461  262131954  262066758  262244368  262062644  262134017  262190823  262146948  262109158  262025999  262067707  262026974  262109639  262118980  262103372  262102585  262042327  262037596;
					263945586  263802601  263858285  263887698  263887297  264028159  263913988  264012159  263901835  263939189  264026016  263957101  263836966  263894149  263906881  263909479  263961555  263904500  263846063  263914430;
					266395254  266551940  266462955  266376153  266465696  266596528  266328061  266414620  266458644  266446099  266485202  266543824  266262176  266401142  266438007  266372354  266412346  266453777  266472763  266495133;
					268704751  268470598  268711780  268503962  268698237  268680034  268598234  268580662  268632450  268543050  268713590  268642049  268471494  268637282  268672461  268686108  268448719  268716908  268649333  268576371;
					271013803  270941656  270924959  270866898  271168647  271057887  270963267  270995114  270904885  271064342  271183747  271002455  270743020  270917314  270870273  271076353  270993692  271085600  271059647  271104227;
					273620634  273518512  273725753  273523279  273728484  273764342  273607690  273785909  273567941  273657007  273829485  273716403  273550956  273631032  273550824  273816586  273562918  273780046  273816171  273842715;
					]/1000000;

traffic_maxRet1 = [262047761  262074175  262065853  262070748  262028962  262181780  261986732  262141133  262178639  262182606  262118164  262058808  262068245  262045232  262120775  262131208  262058036  262124919  261977753  262051052;
					263909574  263880034  263816155  263797133  263988294  263933219  263882370  263904438  263923632  263874055  263903961  263911391  263793622  263880197  263832397  263911774  263963217  263725711  263895218  263873501;
					266384543  266538048  266584929  266270715  266475036  266595980  266410102  266355101  266411201  266313800  266438863  266449495  266234502  266618155  266471057  266451836  266486323  266435821  266446017  266424309;
					268615547  268646547  268711027  268723022  268714647  268517317  268727211  268719286  268574805  268839135  268721044  268824286  268557294  268702034  268739711  268981796  268620194  268735453  268981796  268799262;
					271195565  271176688  271351351  271306932  271515112  271291580  271189162  271391333  271314676  271411552  271353147  271403924  271156725  271395411  271366743  271399274  271088513  271352662  271366479  271374688;
					274217545  274175422  274209191  274143098  274250441  274369676  274026380  274438079  274139934  274278555  274298143  274249814  274077574  274192355  274131717  274495430  274225967  274341771  274439697  274248535;
					]/1000000;

traffic_noRe = [252636276  252649031  252651613  252650704  252582847  252732881  252591164  252653617  252663705  252662541  252639434  252604632  252556631  252613793  252587689  252705544  252611998  252613237  252520191  252613543;
				254173214  254059629  254203135  254128495  254033654  254201272  254131196  254219359  254132093  254068358  254176402  254236044  254082477  254172542  254055761  254092311  254098624  254060050  254034290  254121389;
				257326031  257423021  257387535  257446069  257337567  257454602  257212207  257343881  257331069  257348625  257336432  257329212  257108226  257432089  257172982  257433968  257231559  257258300  257321734  257562871;
				260870326  260648988  260870582  260733972  260988520  260947781  260679056  261015036  260817040  260916463  261002847  260840018  260649502  260941575  260752659  261081846  260926662  261004252  260693431  261030520;
				264947882  264883205  264849677  264701402  264889993  265004605  264794239  264860076  264832134  264803014  264945340  264993839  264340523  264872106  264780461  265018995  264840156  265112753  264817350  265209103;
				269523880  269530843  269568379  269468039  269499002  269461836  269325786  269354987  269278300  269346945  269568127  269317365  269070727  269397779  269407911  269776633  269522123  269852740  269549620  269760886;
				]/1000000;

probabilities = [0.005; 0.01; 0.02; 0.03; 0.04; 0.05];

h = plot(probabilities, mean(traffic_maxRet3,2), 'm.',
		 probabilities, mean(traffic_maxRet2,2), 'b.',
		 probabilities, mean(traffic_maxRet1,2), 'g.',
		 probabilities, mean(traffic_noRe,2), 'k.'
		);

h = errorbar(probabilities, mean(traffic_maxRet3,2), ci(traffic_maxRet3)(:,1), ci(traffic_maxRet3)(:,2), 'm.',
			 probabilities, mean(traffic_maxRet2,2), ci(traffic_maxRet2)(:,1), ci(traffic_maxRet2)(:,2), 'b.',
			 probabilities, mean(traffic_maxRet1,2), ci(traffic_maxRet1)(:,1), ci(traffic_maxRet1)(:,2), 'g.',
			 probabilities, mean(traffic_noRe,2), ci(traffic_noRe)(:,1), ci(traffic_noRe)(:,2), 'k.'
			 );

set(h,'markersize',20);
axis([0 0.052 250 275]);

ax = gca();
set(ax, 'fontsize', 22);
set(ax,'YGrid','on');

b=legend('Max Retransmissions = 3', 'Max Retransmissions = 2', 'Max Retransmissions = 1', 'Only end-to-end reliability');
set(b, 'Location', 'northwest');

title('Total traffic generated');
xlabel('Error probability of links');
ylabel('Total traffic generated in the system (in MB)');