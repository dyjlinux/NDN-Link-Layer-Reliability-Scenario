
%linear topology of various hop lengths

rt_6node_maxRet3 = [308  313  296  308  266  315  310  294  280  310  341  328  272  317  288  297  321  279  268  361;
					196  178  198  157  186  211  168  174  183  194  168  185  168  169  189  187  173  184  176  157;
					90  90  75  89  58  70  99  122  86  70  54  93  95  89  76  68  85  87  92  78;
					41  29  31  23  38  27  42  32  42  33  38  42  49  38  31  30  55  46  28  39;
					12  23  22  33  19  24  22  26  38  24  19  37  32  19  25  25  20  17  25  16;
					12  19  21  16  10  11  14  29  17  26  11  11  14  15  12  11  22  16  19  22;
					12  12  25  6  8  12  19  11  17  3  13  16  19  2  2  8  16  14  8  19;
					];

rt_6node_maxRet2 = [288  298  300  325  297  327  331  282  254  278  333  289  270  319  339  281  337  261  278  311;
					164  208  189  196  174  210  176  189  175  184  165  182  179  218  199  191  182  147  187  176;
					84  78  95  90  78  77  94  102  117  91  89  91  99  96  78  95  76  90  79  94;
					44  59  59  56  59  56  50  67  53  52  48  60  52  56  58  53  66  51  56  53;
					36  44  51  42  38  42  60  54  61  42  49  48  48  47  67  56  67  38  48  64;
					49  62  40  36  20  30  47  31  43  37  50  41  29  45  39  31  49  51  51  54;
					48  38  41  32  44  39  43  46  57  59  47  42  43  48  38  54  41  36  57  36;
					];

rt_6node_maxRet1 = [342  365  382  349  365  350  382  376  353  380  379  382  402  314  373  368  372  324  361  377;
					385  382  366  391  330  366  360  361  346  315  360  321  328  383  368  334  318  334  338  359;
					363  367  389  395  370  378  345  380  389  387  383  384  387  377  364  380  393  372  387  396;
					448  429  430  421  435  429  439  425  454  455  451  458  392  445  428  407  439  452  452  443;
					562  563  530  528  489  528  526  531  482  546  531  564  504  531  545  542  527  509  541  500;
					627  639  610  629  651  632  635  606  580  589  669  624  569  626  617  626  623  641  636  591;
					709  727  669  764  703  705  726  699  722  737  735  744  677  750  706  718  724  777  763  717;
					];

losses_6node_maxRet3 = [0  1  0  1  0  0  0  1  0  1  1  0  0  1  0  0  0  0  0  0;
						0  1  1  0  0  0  0  0  0  0  1  1  0  1  1  1  0  3  0  0;
						1  0  2  1  1  0  1  0  1  0  1  1  0  0  0  1  2  1  0  0;
						1  1  2  1  2  0  1  0  2  0  0  1  1  2  1  2  0  1  1  1;
						0  0  2  1  1  0  1  2  1  0  4  4  2  0  0  1  1  0  1  0;
						2  3  2  3  1  3  1  2  1  5  2  0  2  0  1  3  3  1  4  1;
						2  2  3  1  3  4  0  2  2  1  3  5  1  0  0  0  3  2  1  2;
						];

losses_6node_maxRet2 = [3  3  5  3  5  3  7  3  3  5  4  5  5  7  4  7  4  4  2  6;
						7  12  11  4  14  9  11  10  8  9  8  12  12  3  7  9  12  10  10  10;
						19  10  17  14  14  12  12  21  17  12  12  18  14  10  11  15  21  18  10  15;
						19  24  19  27  23  14  14  22  16  21  11  22  22  17  15  27  24  21  24  23;
						24  21  26  19  21  29  33  22  34  22  26  28  33  24  23  35  31  25  27  32;
						30  35  27  27  15  21  29  22  29  26  36  35  20  34  29  24  30  36  36  40;
						41  29  31  21  33  33  32  39  49  42  39  34  30  36  33  38  27  32  45  31;
						];

losses_6node_maxRet1 = [93  92  105  90  100  88  100  98  109  107  104  88  116  110  97  128  91  85  105  100;
						219  193  204  214  201  195  189  206  193  192  189  178  185  192  206  189  192  181  193  206;
						298  263  314  318  296  314  276  290  325  317  327  307  299  311  298  324  312  299  317  307;
						414  395  390  396  399  400  409  399  416  419  413  428  364  418  400  378  409  416  418  418;
						537  547  504  505  469  496  500  510  465  517  521  544  481  520  515  523  503  499  520  488;
						623  632  596  625  641  624  625  603  568  579  651  615  566  618  604  615  614  630  617  583;
						691  721  665  753  695  701  723  689  705  728  730  734  668  741  702  706  713  768  758  711;
						];

percentage_maxRet3 = (rt_6node_maxRet3-losses_6node_maxRet3)*100./rt_6node_maxRet3;
percentage_maxRet2 = (rt_6node_maxRet2-losses_6node_maxRet2)*100./rt_6node_maxRet2;
percentage_maxRet1 = (rt_6node_maxRet1-losses_6node_maxRet1)*100./rt_6node_maxRet1;
% percentage_withoutRel = (rt_6node_withoutRel-losses_6node_withoutRel)*100./rt_6node_withoutRel;

                    

hops = 1:7;

h = plot	(hops, mean(percentage_maxRet3,2), 'm.',
			 hops, mean(percentage_maxRet2,2), 'b.',
			 hops, mean(percentage_maxRet1,2), 'g.'
			);

h = errorbar(hops, mean(percentage_maxRet3,2), ci(percentage_maxRet3)(:,1), ci(percentage_maxRet3)(:,2), 'm.',
			 hops, mean(percentage_maxRet2,2), ci(percentage_maxRet2)(:,1), ci(percentage_maxRet2)(:,2), 'b.',
			 hops, mean(percentage_maxRet1,2), ci(percentage_maxRet1)(:,1), ci(percentage_maxRet1)(:,2), 'g.'
			);

set(h,'markersize',20);
axis([1 7 0 100]);

ax = gca();
set(ax, 'fontsize', 22);
set(ax,'YGrid','on');

b=legend('Max Retransmissions = 3', 'Max Retransmissions = 2', 'Max Retransmissions = 1');
set(b, 'Location', 'southwest');

title('Percentage of redundant consumer retransmissions');
xlabel("Hop length of linear topologies");
ylabel("Percentage of redundant consumer retransmissions");
%grid on;
